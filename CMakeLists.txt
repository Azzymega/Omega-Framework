cmake_minimum_required(VERSION 3.25)
project(runtime)
set(CMAKE_CXX_FLAGS -static-libgcc)
set(CMAKE_CXX_FLAGS -static-libstdc++)
set(CMAKE_CXX_STANDARD 17)
set ( CMAKE_WINDOWS_EXPORT_ALL_SYMBOLS ON )
add_executable(runtime runtime/main.cpp runtime/cpu.cpp runtime/cpu.h runtime/microcode.cpp runtime/microcode.h libldr/ldr.h)
add_executable(asmcmplr asmcmplr/cmplr.cpp asmcmplr/cmplr.h libldr/ldr.h libldr/ldr.cpp)
add_library( ldr SHARED libldr/ldr.cpp libldr/ldr.h)
add_library( wrt SHARED libwrt/wrtr.cpp libwrt/wrtr.h)
add_library( cmp SHARED asmcmplr/image.cpp asmcmplr/image.h)
add_library( tkn SHARED libcmp/token.cpp libcmp/token.h libcmp/tokenFactory.cpp libcmp/tokenFactory.h libtkn/mov.cpp libtkn/mov.h libtkn/cmv.cpp libtkn/cmv.h libtkn/hlt.cpp libtkn/hlt.h libtkn/jmp.cpp libtkn/jmp.h libtkn/add.cpp libtkn/add.h libtkn/sub.cpp libtkn/sub.h)
target_link_libraries(runtime PRIVATE ldr)
target_link_libraries(runtime PRIVATE wrt)
target_link_libraries(asmcmplr PRIVATE ldr)
target_link_libraries(asmcmplr PRIVATE cmp)
target_link_libraries(asmcmplr PRIVATE wrt)
target_link_libraries(asmcmplr PRIVATE tkn)